<template>
  <div id="admin_posts_table">
    <div class="container-fluid opacity-light mh-100">
    <% include Rails.application.routes.url_helpers %>
    <% include ActionView::Helpers %>
    <div class="row">
      <div class="col-sm-2 border-right">
        <div class="border-bottom p-2">
          <%= link_to t('titles.posts.all'), admin_posts_path %>
        </div>
        <div class="border-bottom p-2">
          <%= link_to t('titles.comments.all'), admin_comments_path %>
        </div>
        <div class="border-bottom p-2">
          <%= link_to t('titles.users.all'), admin_users_path %>
        </div>
      </div>
      <div class="col-sm-10">
        <table class="table border-bottom border-bottom" id="admin_posts_table">
          <thead>
            <tr>
              <th>Id</th>
              <th>Author</th>
              <th>Title</th>
              <th>Edit</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
            <post-row v-for="post in posts" :post="post" :key="post"></post-row>
          </tbody>
        </table>
        <button class="btn btn-light fixed-action-btn mb-2" @click.prevent="$store.commit('createAdminPostFormShow')">
          <%= t('titles.posts.add') %>
        </button>
        <post-form v-if="$store.state.createAdminPostForm" :post="{}"></post-form>
      </div>
    </div>
  </div>
  </div>
</template>

<script>
  import PostRow from './PostRow.vue.erb';
  import PostForm from './PostForm.vue.erb';

  // const posts = JSON.parse(el.dataset.posts);
  export default {
    components: {
      PostRow,
      PostForm,
    },
  };
</script>
